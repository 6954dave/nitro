import os, shutil
import Options

configure = distclean = lambda x: False

def build(bld):
    variant = bld.env['VARIANT']
    env = bld.env_of_name(variant)
    
    #---------------------------------------------------------------------------
    ###### JASPER PLUG-IN
    libPattern = env['cshlib_PATTERN']
    if libPattern.startswith('lib'):
        libPattern = libPattern[3:]
    libEnv = env.copy()
    
    lib = bld.new_task_gen(features='c cshlib', target='JasPerDecompress',
                           use='JASPER nitf-c'.split(), env=libEnv,
                           install_path='${PREFIX}/share/nitf/plugins',
                           source=ant_glob('source/*.c', excl='JasPerCompress.c'))
    libEnv['cshlib_PATTERN'] = libPattern

